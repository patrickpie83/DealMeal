import"./bootstrap.min-9e46bc63.js";const b=document.querySelector(".imgUpload"),l=document.querySelector(".imgInput"),a=document.querySelector(".imgArea"),C=document.querySelector(".imgCancel"),s=document.querySelector("#productSeries"),P=document.querySelector(".checkNameBtn"),r=document.querySelector("#productName"),t=document.querySelector("#existNameText"),i=document.querySelector("#productPrice"),d=document.querySelector("#productStock"),m=document.querySelector("#productIngredient"),v=document.querySelector("#productSize"),p=document.querySelector("#productCalories"),f=document.querySelector("#productCarb"),S=document.querySelector("#productProtein"),g=document.querySelector("#productFat"),y=document.querySelector("#microwave"),q=document.querySelector("#oven"),x=document.querySelector("#electricPot"),N=document.querySelector("#pan"),I=document.querySelector(".finishBtn"),h="https://dealmealserver.onrender.com";let u=!1,n=!1;b.addEventListener("click",function(e){e.preventDefault(),a.innerHTML=`
    <img class="" src="${l.value}" alt="">
    `,n=!0});C.addEventListener("click",function(e){e.preventDefault(),a.innerHTML=`
    <p class="text-danger">目前是空的</p>
    `,l.value="",n=!1});P.addEventListener("click",function(e){e.preventDefault(),r.value||alert("商品名稱不可為空"),L(r.value)});function L(e){axios.get(`${h}/products`).then(function(c){if(!e)t.classList.remove("text-success"),t.classList.add("text-danger"),t.textContent="名稱不可為空",u=!1;else{let o=!1;c.data.forEach(function(k){k.name==e?o=o||!0:o=o||!1}),o?(t.classList.remove("text-success"),t.classList.add("text-danger"),t.textContent="此名稱已存在",u=!1):(t.classList.remove("text-danger"),t.classList.add("text-success"),t.textContent="此名稱可以使用",u=!0)}}).catch(function(c){console.log(c)})}function D(){let e=crypto.randomUUID();axios.post(`${h}/products`,{id:e,image:l.value,series:s.value,name:r.value,storage:Number(d.value),price:Number(i.value),state:"完售中",ingredient:m.value,nutrition:{size:Number(v.value),calories:Number(p.value),carb:Number(f.value),protein:Number(S.value),fat:Number(g.value)},heat:{microwave:y.value,oven:q.value,electricPot:x.value,pan:N.value}}).then(function(c){console.log(c)}).catch(function(c){console.log(c)})}I.addEventListener("click",function(e){e.preventDefault(),L(r.value),l.value?n?s.value=="請選擇"?alert("尚未選取商品系列"):r.value?u?i.value?d.value?m.value?v.value&&p.value&&f.value&&S.value&&g.value?y.value&&q.value&&x.value&&N.value?(D(),alert("成功送出")):alert("加熱方式不可為空"):alert("營養標示不可為空"):alert("內容物不可為空"):alert("庫存不可為空"):alert("單價不可為空"):alert("請檢查商品名稱"):alert("商品名稱不可為空"):alert("請先預覽過圖片"):alert("圖片網址不可為空")});
