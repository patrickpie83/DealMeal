import"./bootstrap.min-d005857b.js";import"./header-1a60f231.js";import"./config-b9ecf40d.js";const m=document.querySelector("#signUpName"),p=document.querySelector("#signUpAddress"),g=document.querySelector("#signUpEmail"),U=document.querySelector("#signUpPassword"),f=document.querySelector(".signUpBtn"),n=document.querySelector(".signUpForm"),y=document.querySelector(".signUpNameContent"),w=document.querySelector(".signUpAddressContent"),E=document.querySelector(".signUpEmailContent"),v=document.querySelector(".signUpPasswordContent"),c=document.querySelector("#loginEmail"),l=document.querySelector("#loginPassword"),C=document.querySelector(".loginBtn");function S(){let e=crypto.randomUUID();axios.post(`${_url}/users`,{id:e,name:m.value,address:p.value,email:g.value,password:U.value,cartExist:!1,historyOrder:[]}).then(function(t){Toast.fire({icon:"success",title:"註冊成功"}).then(a=>{window.location.href="login.html"})}).catch(function(t){console.log(t)})}f.addEventListener("click",function(e){e.preventDefault();const t={用戶名稱:{presence:{allowEmpty:!1,message:"是必填欄位"},format:{pattern:/^[^\s]+([^\s]+)*$/,message:"不可含有空白符號"}}},a={配送地址:{presence:{allowEmpty:!1,message:"是必填欄位"}}},u={電子信箱:{presence:{allowEmpty:!1,message:"是必填欄位"}}},d={密碼:{presence:{allowEmpty:!1,message:"是必填欄位"}}},s=validate(n,t),o=validate(n,a),r=validate(n,u),i=validate(n,d);y.textContent=s?`${s.用戶名稱}`:"",w.textContent=o?`${o.配送地址}`:"",E.textContent=r?`${r.電子信箱}`:"",v.textContent=i?`${i.密碼}`:"",s||o||r||i||S()});function q(){axios.post(`${_url}/login`,{email:c.value,password:l.value}).then(function(e){Toast.fire({icon:"success",title:"登入成功"}).then(t=>{localStorage.setItem("userToken",e.data.accessToken),localStorage.setItem("userId",e.data.user.id),window.location.href="index.html"})}).catch(function(e){console.log(e),Toast.fire({icon:"error",title:"登入失敗"})})}C.addEventListener("click",function(e){if(e.preventDefault(),!(c.value&&l.value)){Toast.fire({icon:"warning",title:"欄位未填"});return}q()});
