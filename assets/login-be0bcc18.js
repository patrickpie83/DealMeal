import"./bootstrap.min-275429c0.js";import"./header-d5d66ed4.js";const p=document.querySelector("#signUpName"),g=document.querySelector("#signUpAddress"),U=document.querySelector("#signUpEmail"),f=document.querySelector("#signUpPassword"),y=document.querySelector(".signUpBtn"),t=document.querySelector(".signUpForm"),E=document.querySelector(".signUpNameContent"),w=document.querySelector(".signUpAddressContent"),v=document.querySelector(".signUpEmailContent"),C=document.querySelector(".signUpPasswordContent"),i=document.querySelector("#loginEmail"),l=document.querySelector("#loginPassword"),S=document.querySelector(".loginBtn"),c="https://dealmealserver.onrender.com";function q(){let e=crypto.randomUUID();axios.post(`${c}/users`,{id:e,name:p.value,address:g.value,email:U.value,password:f.value,cartExist:!1,historyOrder:[]}).then(function(n){alert("註冊成功"),window.location.href="login.html"}).catch(function(n){console.log(n)})}y.addEventListener("click",function(e){e.preventDefault();const n={用戶名稱:{presence:{allowEmpty:!1,message:"是必填欄位"},format:{pattern:/^[^\s]+([^\s]+)*$/,message:"不可含有空白符號"}}},d={配送地址:{presence:{allowEmpty:!1,message:"是必填欄位"}}},m={電子信箱:{presence:{allowEmpty:!1,message:"是必填欄位"}}},u={密碼:{presence:{allowEmpty:!1,message:"是必填欄位"}}},s=validate(t,n),o=validate(t,d),r=validate(t,m),a=validate(t,u);E.textContent=s?`${s.用戶名稱}`:"",w.textContent=o?`${o.配送地址}`:"",v.textContent=r?`${r.電子信箱}`:"",C.textContent=a?`${a.密碼}`:"",s||o||r||a||q()});function h(){axios.post(`${c}/login`,{email:i.value,password:l.value}).then(function(e){alert("登入成功"),localStorage.setItem("userToken",e.data.accessToken),localStorage.setItem("userId",e.data.user.id),window.location.href="index.html"}).catch(function(e){console.log(e),alert("登入失敗")})}S.addEventListener("click",function(e){if(e.preventDefault(),!(i.value&&l.value)){alert("欄位未填");return}h()});
