import"./bootstrap.min-f122c4cb.js";import"./admin-header-e186e282.js";const b=document.querySelector(".imgUpload"),u=document.querySelector(".imgInput"),a=document.querySelector(".imgArea"),C=document.querySelector(".imgCancel"),s=document.querySelector("#productSeries"),P=document.querySelector(".checkNameBtn"),r=document.querySelector("#productName"),c=document.querySelector("#existNameText"),d=document.querySelector("#productPrice"),m=document.querySelector("#productStock"),f=document.querySelector("#productIngredient"),v=document.querySelector("#productSize"),p=document.querySelector("#productCalories"),g=document.querySelector("#productCarb"),S=document.querySelector("#productProtein"),y=document.querySelector("#productFat"),q=document.querySelector("#microwave"),w=document.querySelector("#oven"),h=document.querySelector("#electricPot"),x=document.querySelector("#pan"),I=document.querySelector(".finishBtn"),N="https://dealmealserver.onrender.com",t=Swal.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:1e3,timerProgressBar:!1,didOpen:e=>{e.onmouseenter=Swal.stopTimer,e.onmouseleave=Swal.resumeTimer}});let i=!1,l=!1;b.addEventListener("click",function(e){e.preventDefault(),a.innerHTML=`
    <img class="" src="${u.value}" alt="">
    `,l=!0});C.addEventListener("click",function(e){e.preventDefault(),a.innerHTML=`
    <p class="text-danger">目前是空的</p>
    `,u.value="",l=!1});P.addEventListener("click",function(e){e.preventDefault(),r.value||t.fire({icon:"warning",title:"商品名稱不可為空"}),L(r.value)});function L(e){axios.get(`${N}/products`).then(function(n){if(!e)c.classList.remove("text-success"),c.classList.add("text-danger"),c.textContent="名稱不可為空",i=!1;else{let o=!1;n.data.forEach(function(k){if(k.name==e){o=o||!0;return}else o=o||!1}),o?(c.classList.remove("text-success"),c.classList.add("text-danger"),c.textContent="此名稱已存在",i=!1):(c.classList.remove("text-danger"),c.classList.add("text-success"),c.textContent="此名稱可以使用",i=!0)}}).catch(function(n){console.log(n)})}function T(){let e=crypto.randomUUID();axios.post(`${N}/products`,{id:e,image:u.value,series:s.value,name:r.value,storage:Number(m.value),price:Number(d.value),state:"完售中",ingredient:f.value,nutrition:{size:Number(v.value),calories:Number(p.value),carb:Number(g.value),protein:Number(S.value),fat:Number(y.value)},heat:{microwave:q.value,oven:w.value,electricPot:h.value,pan:x.value}}).then(function(n){t.fire({icon:"success",title:"成功送出"}).then(o=>{window.location.href="admin-products.html"})}).catch(function(n){console.log(n)})}I.addEventListener("click",function(e){e.preventDefault(),L(r.value),u.value?l?s.value=="請選擇"?t.fire({icon:"warning",title:"尚未選取商品系列"}):r.value?i?d.value?m.value?f.value?v.value&&p.value&&g.value&&S.value&&y.value?q.value&&w.value&&h.value&&x.value?T():t.fire({icon:"warning",title:"加熱方式不可為空"}):t.fire({icon:"warning",title:"營養標示不可為空"}):t.fire({icon:"warning",title:"內容物不可為空"}):t.fire({icon:"warning",title:"庫存不可為空"}):t.fire({icon:"warning",title:"單價不可為空"}):t.fire({icon:"warning",title:"請檢查商品名稱"}):t.fire({icon:"warning",title:"商品名稱不可為空"}):t.fire({icon:"warning",title:"請先預覽過圖片"}):t.fire({icon:"warning",title:"圖片網址不可為空"})});
