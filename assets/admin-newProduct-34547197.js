import"./bootstrap.min-9e46bc63.js";const b=document.querySelector(".imgUpload"),u=document.querySelector(".imgInput"),s=document.querySelector(".imgArea"),C=document.querySelector(".imgCancel"),i=document.querySelector("#productSeries"),P=document.querySelector(".checkNameBtn"),r=document.querySelector("#productName"),c=document.querySelector("#existNameText"),d=document.querySelector("#productPrice"),m=document.querySelector("#productStock"),v=document.querySelector("#productIngredient"),p=document.querySelector("#productSize"),f=document.querySelector("#productCalories"),g=document.querySelector("#productCarb"),S=document.querySelector("#productProtein"),y=document.querySelector("#productFat"),q=document.querySelector("#microwave"),h=document.querySelector("#oven"),x=document.querySelector("#electricPot"),N=document.querySelector("#pan"),I=document.querySelector(".finishBtn"),l="https://dealmealserver.onrender.com";let n=!1,a=!1;b.addEventListener("click",function(e){e.preventDefault(),s.innerHTML=`
    <img class="" src="${u.value}" alt="">
    `,a=!0});C.addEventListener("click",function(e){e.preventDefault(),s.innerHTML=`
    <p class="text-danger">目前是空的</p>
    `,u.value="",a=!1});P.addEventListener("click",function(e){e.preventDefault(),r.value||alert("商品名稱不可為空"),k(r.value)});function k(e){axios.get(`${l}/products`).then(function(o){if(!e)c.classList.remove("text-success"),c.classList.add("text-danger"),c.textContent="名稱不可為空",n=!1;else{let t=!1;o.data.forEach(function(L){L.name==e?t=t||!0:t=t||!1}),t?(c.classList.remove("text-success"),c.classList.add("text-danger"),c.textContent="此名稱已存在",n=!1):(c.classList.remove("text-danger"),c.classList.add("text-success"),c.textContent="此名稱可以使用",n=!0)}}).catch(function(o){console.log(o)})}function D(){axios.get(`${l}/products`).then(function(e){let o,t=e.data.length;o=Math.floor((t-1)/4)+1,E(o)}).catch(function(e){console.log(e)})}function E(e){let o=crypto.randomUUID();axios.post(`${l}/products`,{page:e,id:o,image:u.value,series:i.value,name:r.value,storage:Number(m.value),price:Number(d.value),state:"完售中",ingredient:v.value,nutrition:{size:Number(p.value),calories:Number(f.value),carb:Number(g.value),protein:Number(S.value),fat:Number(y.value)},heat:{microwave:q.value,oven:h.value,electricPot:x.value,pan:N.value}}).then(function(t){console.log(t)}).catch(function(t){console.log(t)})}I.addEventListener("click",function(e){e.preventDefault(),k(r.value),u.value?a?i.value=="請選擇"?alert("尚未選取商品系列"):r.value?n?d.value?m.value?v.value?p.value&&f.value&&g.value&&S.value&&y.value?q.value&&h.value&&x.value&&N.value?(D(),alert("成功送出")):alert("加熱方式不可為空"):alert("營養標示不可為空"):alert("內容物不可為空"):alert("庫存不可為空"):alert("單價不可為空"):alert("請檢查商品名稱"):alert("商品名稱不可為空"):alert("請先預覽過圖片"):alert("圖片網址不可為空")});
